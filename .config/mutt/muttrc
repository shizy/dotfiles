source "if [ ! -e $XDG_CACHE_HOME/mutt ]; then mkdir $XDG_CACHE_HOME/mutt > /dev/null; fi |"

# Paths
set folder           = $XDG_DATA_HOME/mail
set header_cache     = $XDG_CACHE_HOME/mutt/headers
set message_cachedir = $XDG_CACHE_HOME/mutt/
set certificate_file = $XDG_CACHE_HOME/mutt/certs
set mailcap_path     = $XDG_CONFIG_HOME/mutt/mailcap
set tmpdir           = $XDG_CACHE_HOME/mutt

# Account
set spoolfile  = "=gmail/INBOX"
set postponed  = "=gmail/[Gmail].Drafts"
unset record
set timeout    = 30
set mail_check = 5
mailboxes =gmail/INBOX
mailboxes =gmail/[Gmail].Drafts
mailboxes =gmail/[Gmail].Trash
mailboxes =gmail/[Gmail].Sent\ Mail
mailboxes =gmail/[Gmail].Starred

# SMTP
set realname       = "Robert & Carly Winterstein"
set from           = shizukesa4@gmail.com
set use_from       = yes
set envelope_from  = yes
set smtp_url       = "smtp://shizukesa4@smtp.gmail.com:587/"
set move           = no

# Pager
set pager_format      = ''
set pager_context     = 10
set pager_index_lines = 10
set pager_stop

# Index
unset mark_old
unset markers
unset to_chars
set sort         = 'threads'
set sort_aux     = 'last-date-received'
set index_format = '%Z  %{%b %d}  %-30.30L  -  %s'
set menu_scroll

# Side-bar
set sidebar_format    = '  %B %> %N  '
set sidebar_visible   = yes
set sidebar_width     = 32
set sidebar_sort      = yes
set sidebar_delim     = '  '
set sidebar_shortpath = yes

# General
auto_view text/x-vcard text/html text/enriched
alternative_order text/plain text/enriched text/html
set status_format = '  %P %> New: %n  Flagged: %F  Total: %m  '
set beep          = yes
set beep_new      = yes
set sleep_time    = 0
set confirmappend = no
set recall        = no
set delete        = yes
unset tilde
set text_flowed
set editor        = 'nvim'
set meta_key      = yes

# Headers
ignore *
unignore from: to: cc: date: subject:
unhdr_order *
hdr_order from: to: cc: date: subject:

# Macros
macro index,pager       <space>u        '<sync-mailbox><shell-escape>offlineimap -c $XDG_CONFIG_HOME/offlineimap/offlineimaprc -o<enter>'
macro index,pager       \el             <sidebar-next><sidebar-open><display-message>
macro index,pager       \eh             <sidebar-prev><sidebar-open><display-message>
macro index,pager       \em             <save-message>?<toggle-mailboxes>
macro index,pager       \ex             '<save-message><kill-line>=gmail/[Gmail].Trash<enter><sync-mailbox>'
macro index,pager       k               <previous-entry>
macro index,pager       j               <next-entry>
macro index,pager       \ec             ":set smtp_pass=`pass web/google`;<enter><mail>"

macro index             /               '<limit><kill-line>~B '
macro index             \e/             '<limit><kill-line>all<enter><last-entry>'

macro pager             !               <flag-message><display-message>
macro pager             gg              <exit><first-entry>
macro pager             G               <exit><last-entry>
macro pager             /               '<exit><limit><kill-line>~B '
macro pager             \e/             '<exit><limit><kill-line>all<enter><last-entry>'

# Bindings
bind generic            x               noop
bind generic            q               noop
bind generic            j               next-entry
bind generic            k               previous-entry
bind generic            u               exit

bind index              u               noop
bind index              !               flag-message
bind index              gg              first-entry
bind index              G               last-entry

bind index,pager        s               noop
bind index,pager        d               noop
bind index,pager        q               noop
bind index,pager        \ea             group-reply
#bind index,pager        \ec             mail
bind index,pager        \ef             forward-message
bind index,pager        \er             reply
bind index,pager        <space>w        sync-mailbox
bind index,pager        \ej             half-down
bind index,pager        \ek             half-up
bind index,pager        \ez             quit

bind pager              i               noop
bind pager              u               exit

bind attach             u               exit
bind browser            u               exit
bind compose            u               exit

# COLORS
color sidebar_new       color200        default

color error             color203        default
color markers           color200        color232
color tilde             color108        default
color status            color203        color232

color indicator         color252        color236
color tree              color203        default
color index             color201        default ~N #new
color index             color203        default ~O #old
color index             default         default ~Q #replied
color index             color200        default ~F #flagged
color index             color232        default ~D #deleted

color hdrdefault        color204        default
color header            color202        default "^Subject"

color body              color201        default "(finger|ftp|http|https|news|telnet)://[^ >]*"
color body              color201        default "<URL:[^ ]*>"
color body              color201        default "www\\.[-.a-z0-9]+\\.[a-z][a-z][a-z]?([-_./~a-z0-9]+)?"
color body              color201        default "mailto: *[^ ]+\(\\i?subject=[^ ]+\)?"
color body              color201        default "[-a-z_0-9.%$]+@[-a-z_0-9.]+\\.[-a-z][-a-z]+"

color attachment        color203        default
color signature         default         default

color quoted            color238        default
color quoted1           color237        default
color quoted2           color236        default
color quoted3           color235        default
color quoted4           color234        default
color quoted5           color233        default
color quoted6           color232        default
color quoted7           color231        default
color quoted8           color230        default
color quoted9           color229        default
