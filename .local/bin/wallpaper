#!/bin/bash

if [ ! -d "$HOME/.local/wallpaper" ]; then
    mkdir $HOME/.local/wallpaper 2>/dev/null
fi

if [ "$1" ]; then
    x=$(basename $1)
    mv -f $1 "$HOME/.local/wallpaper/$x"
else
    x=$(ls -t $HOME/.local/wallpaper 2>/dev/null | tail -n 1)
fi

touch "$HOME/.local/wallpaper/$x"
feh --bg-fill --no-fehbg "$HOME/.local/wallpaper/$x"
echo -n "feh --bg-fill --no-fehbg '$HOME/.local/wallpaper/$x'" > $XDG_CACHE_HOME/fehbg
